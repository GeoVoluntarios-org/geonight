<!DOCTYPE html>
<html class="h-100">

<head>
    <meta charset="UTF-8" />
    <title>Terra Incógnita | Juego</title>
    <script>
        const host = window.location.hostname;
        if (location.protocol !== 'https:' && !(host === 'localhost' || host === "127.0.0.1")) {
            location.replace(`https:${location.href.substring(location.protocol.length)}`);
        }
    </script>
    <link
       rel="stylesheet"
       href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <link
       rel="stylesheet"
       href="https://use.fontawesome.com/releases/v5.7.2/css/solid.css"
       integrity="sha384-r/k8YTFqmlOaqRkZuSiE9trsrDXkh07mRaoGBMoDcmA58OHILZPsk29i2BsFng1B"
       crossorigin="anonymous"
    />
    <link
       rel="stylesheet"
       href="https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css"
       integrity="sha384-4aon80D8rXCGx9ayDt85LbyUHeMWd3UiBaWliBlJ53yzm9hqN21A+o1pqoyK04h+"
       crossorigin="anonymous"
    />
    <link
       rel="stylesheet"
       href="css/styles.css"
    >
    <link
       rel="stylesheet"
       href="css/geonight-styles.css"
    >
    <link
       rel="stylesheet"
       type="text/css"
       href="css/main.css"
    />
    <link
       rel="stylesheet"
       href="https://js.arcgis.com/4.18/esri/themes/light/main.css"
    >
    <link
       rel="shortcut icon"
       href="images/favicon.ico"
       type="image/x-icon"
    >
</head>

<body class="h-100">
    <div
       id="app"
       class="h-100 d-flex flex-column"
    >
        <div class="nav-container">
            <nav
               class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top bg-port-gore"
               id="mainNav"
            >
                <div class="container">
                    <a
                       class="navbar-brand js-scroll-trigger"
                       href="#page-top"
                    >Terra Incógnita <span class="subtitle">by AGE & GeoDevelopers</span></a>
                    <button
                       class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded"
                       type="button"
                       data-toggle="collapse"
                       data-target="#navbarResponsive"
                       aria-controls="navbarResponsive"
                       aria-expanded="false"
                       aria-label="Toggle navigation"
                    >
                        Menu
                        <svg
                           class="svg-inline--fa fa-bars fa-w-14"
                           aria-hidden="true"
                           focusable="false"
                           data-prefix="fas"
                           data-icon="bars"
                           role="img"
                           xmlns="http://www.w3.org/2000/svg"
                           viewBox="0 0 448 512"
                           data-fa-i2svg=""
                        >
                            <path
                               fill="currentColor"
                               d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
                            ></path>
                        </svg>
                    </button>
                    <div
                       class="collapse navbar-collapse"
                       id="navbarResponsive"
                    >
                        <ul class="navbar-nav d-none d-md-block ml-auto">

                            <!-- Fullsize dropdown: show if authenticated -->
                            <li class="nav-item dropdown auth-visible hidden">
                                <a
                                   class="nav-link dropdown-toggle"
                                   href="#"
                                   id="profileDropDown"
                                   data-toggle="dropdown"
                                >
                                    <!-- Profile image should be set to the profile picture from the id token -->
                                    <img
                                       alt="Profile picture"
                                       class="nav-user-profile profile-image rounded-circle"
                                       width="50"
                                    />
                                </a>
                                <div class="dropdown-menu">
                                    <!-- Show the user's full name from the id token here -->
                                    <div class="dropdown-header nav-user-name user-name"></div>
                                    <a
                                       href="#"
                                       class="dropdown-item"
                                       id="qsLogoutBtn"
                                       onclick="logout()"
                                    >
                                        <i class="fas fa-power-off mr-3"></i> Salir
                                    </a>
                                </div>
                            </li>
                            <!-- /Fullsize dropdown -->
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div
           id="main-content"
           class="container mt-9 flex-grow-1"
        >

            <div
               class="page hidden"
               id="content-home"
            >
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <h1>Instrucciones:</h1>
                            <h2>Objetivo del juego</h2>
                            <p>
                                El juego consiste en adivinar las ubicaciones en el menor tiempo posible cometiendo el
                                menor error (distancia) posible. Antes de terminar habrá una última pregunta que
                                ponderará la puntuación final.
                            </p>
                            <h2>Dinámica de funcionamiento</h2>
                            <ul>
                                <li>
                                    Al introducir el nombre del equipo (tras identificarse) empezará a correr el tiempo.
                                </li>
                                <li>
                                    Por cada ubicación se darán una serie de pistas (el número de pistas no es el mismo
                                    para todas las ubicaciones)
                                </li>
                                <li>No hace falta ver todas las pistas</li>
                                <li>Cuando hagas clic en el mapa se enviará automáticamente (cuidado), y no se pueden
                                    enviar dos veces</li>
                                <li>Una vez respondida una ubicación no se podrá volver a intentar</li>
                            </ul>
                            <h2>Sistema de puntuación:</h2>
                            <p>
                                Por la dinámica a seguir, en este juego no se consiguen puntos sino una penalización, y
                                <strong>ganará quien obtenga la menor penalización</strong>.
                                La penalización se calcula de la siguiente manera: <br>
                                Penalización = Error acumulado (Distancia en KM) x Tº empleado para la prueba (en
                                segundos) x Factor de
                                ponderación (0.8 si se acierta si la última pregunta, 1 sino).
                            </p>
                            <h2>¿Listos para empezar?</h2>
                            <p>Regístrate e introduce tu nombre de equipo</p>
                            <div class="nav-item auth-invisible">
                                <button
                                   id="qsLoginBtn"
                                   onclick="login()"
                                   class="btn btn-primary btn-margin auth-invisible btn-block hidden"
                                >
                                    Empezar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div
               id="content-team-name"
               class="page hidden"
            >
                <div class="row">
                    <div class="col text-center">
                        <form id="registerName">

                            <label for="teamName">Introduce el nombre de tu equipo</label>
                            <input
                               type="text"
                               class="form-control"
                               id="teamName"
                               required
                            >
                            <label for="teamMembers">Introduce los nombres y apellidos de los miembros de
                                equipo:</label>
                            <textarea
                               class="form-control"
                               id="teamMembers"
                               required
                            ></textarea>
                            <button
                               type="submit"
                               class="btn btn-primary mt-2 btn-block"
                            >
                                Comenzar
                            </button>
                        </form>
                    </div>

                </div>

            </div>

            <div
               id="content-game"
               class="page hidden"
            >
                <div
                   class="row hidden"
                   id="team-data"
                >
                    <div
                       class="col-md-4 text-center"
                       id="team-name"
                    >
                        Equipo:
                        <span></span>
                    </div>
                    <div
                       class="col-md-4 text-center"
                       id="team-error"
                    >
                        Error acumulado: <span>0km</span>
                    </div>
                    <div
                       class="col-md-4 "
                       id="team-time"
                    >
                        Tiempo: <span></span>
                    </div>
                </div>
                <div
                   id="clueText"
                   class="hidden"
                ></div>
                <div
                   id="activeClue"
                   class="hidden"
                >
                    <a
                       href=""
                       class="img"
                       target="_blank"
                    >
                        <img>
                    </a>
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe
                           class="embed-responsive-item"
                           width="1600"
                           height="900"
                           frameborder="0"
                           allowfullscreen
                        ></iframe>
                    </div>

                </div>
                <div
                   id="finalForm"
                   class="hidden"
                >
                    <form action="#">
                        <p>
                            ¿Qué relación une a las 5 localizaciones que has identificado?
                        </p>
                        <input
                           type="text"
                           id="inputTxt"
                           class="form-control"
                           required
                        >
                        <!-- <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio1"
                               name="testFinal"
                               class="custom-control-input"
                               value="Magallanes"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio1"
                            >
                                Magallanes
                            </label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio2"
                               name="testFinal"
                               class="custom-control-input"
                               value="Elcano"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio2"
                            >
                                Elcano
                            </label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio3"
                               name="testFinal"
                               class="custom-control-input"
                               value="La vuelta al mundo"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio3"
                            >
                                La vuelta al mundo
                            </label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio4"
                               name="testFinal"
                               class="custom-control-input"
                               value="Circunvalación"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio4"
                            >
                                Circunvalación
                            </label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio5"
                               name="testFinal"
                               class="custom-control-input"
                               value="Circunavegación"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio5"
                            >
                                Circunavegación
                            </label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input
                               type="radio"
                               id="customRadio6"
                               name="testFinal"
                               class="custom-control-input"
                               value="Expedición"
                            >
                            <label
                               class="custom-control-label"
                               for="customRadio6"
                            >
                                Expedición
                            </label>
                        </div> -->
                        <input
                           type="submit"
                           class="btn btn-primary btn-block mt-3"
                           id="btnEndGame"
                           value="ENVIAR"
                        >
                    </form>
                </div>
                <div
                   id="responseBox"
                   class="hidden text-center mb-1"
                >
                    Haz clic en el globo donde creas que se encuentra esta localización
                    <span id="response"></span>
                </div>
                <div
                   id="viewDiv"
                   data-location="0"
                >
                </div>
                <div
                   class="text-center mt-3 hidden"
                   id="game-buttons"
                >
                    <button
                       class="btn btn-primary"
                       id="locatePlace"
                    >
                        UBICAR LOCALIZACIÓN
                    </button>
                    <button
                       class="btn btn-primary hidden"
                       id="returnToClues"
                    >
                        VOLVER A LAS PISTAS
                    </button>
                </div>
                <ol
                   id="locations"
                   class="hidden"
                >

                </ol>
                <div
                   id="cluesDetails"
                   class="location-0 hidden"
                >
                    <div id="clues">
                    </div>
                </div>

            </div>

            <div
               id="finalResult"
               class="hidden"
            >

                <div id="finalPoints"></div>

            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="//unpkg.com/string-similarity/umd/string-similarity.min.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script src="js/palette.js"></script>
    <script
       type="module"
       src="js/game.js"
    ></script>
    <script src="https://js.arcgis.com/4.18/"></script>
</body>

</html>
